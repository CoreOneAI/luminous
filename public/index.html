<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Luminous Salon</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    /* Browser Background */
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    /* Phone Container */
    .phone-frame {
      width: 375px;
      height: 812px;
      background: #000;
      border-radius: 40px;
      padding: 10px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      position: relative;
      overflow: hidden;
    }
    
    /* Phone Screen */
    .phone-screen {
      width: 100%;
      height: 100%;
      background: #fff;
      border-radius: 30px;
      overflow: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
    }
    
    /* Splash Screen */
    .splash-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      transition: opacity 0.6s ease-in-out;
    }
    
    .splash-logo {
      width: 120px;
      height: 120px;
      border-radius: 25px;
      background: linear-gradient(135deg, #C9A961 0%, #D4B97A 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      box-shadow: 0 5px 15px rgba(201, 169, 97, 0.4);
    }
    
    .splash-logo span {
      font-size: 50px;
      color: white;
    }
    
    .splash-text {
      color: white;
      font-size: 24px;
      font-weight: 600;
      letter-spacing: 1px;
      margin-top: 20px;
    }
    
    .splash-progress {
      width: 200px;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      margin-top: 30px;
      overflow: hidden;
    }
    
    .splash-progress-bar {
      height: 100%;
      width: 0%;
      background: #C9A961;
      border-radius: 2px;
      transition: width 0.5s ease;
    }
    
    /* Flutter AppBar */
    .app-bar {
      background: #000;
      color: #fff;
      height: 56px;
      display: flex;
      align-items: center;
      padding: 0 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .app-bar-leading {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .app-bar-title {
      flex: 1;
      text-align: center;
      font-size: 18px;
      font-weight: 600;
      margin-right: 48px;
    }
    
    /* Flutter Scaffold Body */
    .scaffold-body {
      flex: 1;
      overflow-y: auto;
      background: #fafafa;
      position: relative;
    }
    
    /* Grid View */
    .grid-view {
      padding: 8px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }
    
    /* Category Cards */
    .category-card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12);
      text-decoration: none;
      color: inherit;
      cursor: pointer;
    }
    
    .category-image {
      width: 100%;
      height: 100px;
      position: relative;
      overflow: hidden;
    }
    
    .category-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    
    .category-card:hover .category-image img {
      transform: scale(1.05);
    }
    
    .category-body {
      padding: 10px;
    }
    
    .category-title {
      font-size: 13px;
      font-weight: 600;
      color: 212121;
      margin: 4px 0;
      line-height: 1.2;
    }
    
    .category-subtitle {
      font-size: 11px;
      color: #757575;
      line-height: 1.2;
    }
    
    /* Hero Banner */
    .hero-banner {
      background: linear-gradient(135deg, #000 0%, #333 100%);
      color: #fff;
      padding: 16px;
      margin: 8px;
      border-radius: 12px;
    }
    
    .hero-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    
    .hero-text {
      font-size: 12px;
      opacity: 0.9;
    }
    
    /* Quick Actions */
    .quick-actions {
      padding: 8px;
      display: flex;
      gap: 8px;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    
    .quick-actions::-webkit-scrollbar {
      display: none;
    }
    
    .action-button {
      flex: 0 0 auto;
      padding: 8px 16px;
      background: #000;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .action-button:active {
      background: #333;
    }
    
    /* Section Label */
    .section-label {
      padding: 12px 12px 4px;
      font-size: 14px;
      font-weight: 600;
      color: #000;
    }
    
    /* Products Scroll */
    .products-scroll {
      padding: 8px;
      display: flex;
      gap: 8px;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    
    .products-scroll::-webkit-scrollbar {
      display: none;
    }
    
    .mini-product {
      flex: 0 0 120px;
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12);
      cursor: pointer;
    }
    
    .mini-product-image {
      width: 100%;
      height: 80px;
      position: relative;
      overflow: hidden;
    }
    
    .mini-product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .mini-product-info {
      padding: 8px;
    }
    
    .mini-product-name {
      font-size: 11px;
      font-weight: 600;
      margin-bottom: 2px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .mini-product-price {
      font-size: 13px;
      font-weight: 700;
      color: #000;
    }
    
    /* Promo Card */
    .promo-card {
      margin: 8px;
      padding: 12px;
      background: linear-gradient(135deg, #000000 0%, #000000 100%);
      border-radius: 12px;
      color: #fff;
    }
    
    .promo-title {
      font-size: 14px;
      font-weight: 700;
      margin-bottom: 2px;
      color: #C9A961;
    }
    
    .promo-text {
      font-size: 11px;
      opacity: 0.95;
    }
    
    /* Profile View */
    .profile-view {
      display: none;
      padding: 16px;
    }
    
    .profile-header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .profile-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: #C9A961;
      margin: 0 auto 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      color: white;
      position: relative;
    }
    
    .profile-avatar-edit {
      position: absolute;
      bottom: 0;
      right: 0;
      background: #000;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .profile-name {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .profile-email {
      font-size: 14px;
      color: #666;
    }
    
    .profile-card {
      background: white;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .profile-card-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .profile-card-content {
      font-size: 14px;
    }
    
    .appointment-item {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .appointment-item:last-child {
      border-bottom: none;
    }
    
    .profile-edit-btn {
      background: #C9A961;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }
    
    .profile-field {
      margin-bottom: 12px;
    }
    
    .profile-field label {
      display: block;
      font-size: 12px;
      color: #666;
      margin-bottom: 4px;
    }
    
    .profile-field input, .profile-field textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
    }
    
    .profile-field textarea {
      min-height: 80px;
      resize: vertical;
    }
    
    /* Message View */
    .message-view {
      display: none;
      padding: 16px;
    }
    
    .message-contact {
      display: flex;
      align-items: center;
      padding: 12px;
      background: white;
      border-radius: 12px;
      margin-bottom: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .message-contact-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: #C9A961;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
      margin-right: 12px;
    }
    
    .message-contact-info {
      flex: 1;
    }
    
    .message-contact-name {
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .message-contact-role {
      font-size: 12px;
      color: #666;
    }
    
    .message-contact-action {
      display: flex;
      gap: 10px;
    }
    
    .message-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
      color: white;
      cursor: pointer;
    }
    
    /* Booking View */
    .booking-view {
      display: none;
      padding: 16px;
    }
    
    .booking-steps {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      position: relative;
    }
    
    .booking-steps::before {
      content: '';
      position: absolute;
      top: 14px;
      left: 0;
      right: 0;
      height: 2px;
      background: #eee;
      z-index: 1;
    }
    
    .booking-step {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: white;
      border: 2px solid #eee;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      position: relative;
      z-index: 2;
    }
    
    .booking-step.active {
      background: #C9A961;
      border-color: #C9A961;
      color: white;
    }
    
    .booking-step-label {
      position: absolute;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 10px;
      white-space: nowrap;
      color: #666;
    }
    
    .booking-step.active .booking-step-label {
      color: #C9A961;
      font-weight: 600;
    }
    
    .booking-form {
      background: white;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    .booking-section {
      display: none;
    }
    
    .booking-section.active {
      display: block;
    }
    
    .booking-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 16px;
      text-align: center;
    }
    
    .booking-field {
      margin-bottom: 16px;
    }
    
    .booking-field label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    
    .booking-field input, .booking-field select, .booking-field textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
    }
    
    .booking-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    
    .booking-btn {
      padding: 12px 20px;
      background: #000;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }
    
    .booking-btn.next {
      background: #C9A961;
    }
    
    .booking-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-bottom: 16px;
    }
    
    .calendar-header {
      grid-column: 1 / -1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .calendar-weekday {
      text-align: center;
      font-size: 12px;
      font-weight: 600;
      color: #666;
      padding: 5px;
    }
    
    .calendar-day {
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .calendar-day:hover {
      background: #f0f0f0;
    }
    
    .calendar-day.selected {
      background: #C9A961;
      color: white;
    }
    
    .calendar-day.disabled {
      color: #ccc;
      cursor: not-allowed;
    }
    
    .time-slots {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-top: 10px;
    }
    
    .time-slot {
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      font-size: 14px;
    }
    
    .time-slot:hover {
      background: #f0f0f0;
    }
    
    .time-slot.selected {
      background: #C9A961;
      color: white;
      border-color: #C9A961;
    }
    
    .time-slot.disabled {
      color: #ccc;
      cursor: not-allowed;
    }
    
    /* Bottom Navigation */
    .bottom-nav {
      background: #fff;
      height: 56px;
      border-top: 1px solid #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: space-around;
    }
    
    .nav-item {
      flex: 1;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #757575;
      transition: all 0.2s;
      text-decoration: none;
    }
    
    .nav-item.active {
      color: #000;
    }
    
    .nav-label {
      font-size: 10px;
      font-weight: 500;
    }
    
    /* Floating Action Button */
    .fab {
      position: absolute;
      bottom: 70px;
      right: 16px;
      width: 56px;
      height: 56px;
      background: #000;
      color: #fff;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      cursor: pointer;
      font-size: 24px;
      z-index: 10;
      transition: all 0.2s;
    }
    
    .fab:hover {
      transform: scale(1.05);
    }
    
    .fab:active {
      transform: scale(0.95);
    }
    
    /* Chat Container Styles */
    .chat-container {
      padding: 8px;
    }
    
    .chat-box {
      background: #fff;
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    }
    
    .chat-messages {
      height: 200px;
      overflow-y: auto;
      background: #f9f9f9;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      display: flex;
      flex-direction: column;
    }
    
    .chat-message {
      padding: 8px;
      margin: 4px 0;
      border-radius: 8px;
      font-size: 12px;
      max-width: 80%;
    }
    
    .chat-message.bot {
      background: #e0e0e0;
      align-self: flex-start;
    }
    
    .chat-message.user {
      background: #000;
      color: white;
      align-self: flex-end;
      margin-left: auto;
    }
    
    .chat-input-container {
      display: flex;
      gap: 8px;
    }
    
    .chat-input {
      flex: 1;
      padding: 10px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 13px;
    }
    
    .chat-send {
      padding: 10px 20px;
      background: #000;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
    }
    
    /* Search Container */
    .search-container {
      padding: 8px;
    }
    
    .search-box {
      background: #fff;
      border-radius: 12px;
      padding: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.12);
    }
    
    .search-input-container {
      display: flex;
      gap: 8px;
    }
    
    .search-input {
      flex: 1;
      padding: 10px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 13px;
    }
    
    .search-button {
      padding: 10px 20px;
      background: #C9A961;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
    }
    
    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      display: none;
      justify-content: center;
      align-items: center;
    }
    
    .product-modal {
      background: white;
      padding: 20px;
      border-radius: 12px;
      max-width: 90%;
      max-height: 80%;
      overflow-y: auto;
      z-index: 1001;
      position: relative;
    }
    
    .modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 24px;
      cursor: pointer;
      z-index: 1002;
    }
    
    /* Responsive */
    @media (max-width: 425px) {
      .phone-frame {
        width: 100%;
        height: 100vh;
        border-radius: 0;
        padding: 0;
      }
      
      .phone-screen {
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <!-- Phone Frame Container -->
  <div class="phone-frame">
    <div class="phone-screen">
      
      <!-- Splash Screen -->
      <div class="splash-screen" id="splashScreen">
        <div class="splash-logo">
          <span>üíá</span>
        </div>
        <div class="splash-text">Luminous Salon</div>
        <div class="splash-progress">
          <div class="splash-progress-bar" id="splashProgress"></div>
        </div>
      </div>
      
      <!-- Flutter AppBar -->
      <div class="app-bar">
        <div class="app-bar-leading">
          <span style="font-size: 20px;">üîî</span>
        </div>
        <div class="app-bar-title">Luminous Salon</div>
      </div>
      
      <!-- Main View -->
      <div class="scaffold-body" id="mainView">
        
        <!-- Hero Banner -->
        <div class="hero-banner">
          <div class="hero-title">Welcome to Luminous</div>
          <div class="hero-text">Your premier beauty destination</div>
        </div>
        
        <!-- Quick Actions -->
        <div class="quick-actions">
          <button class="action-button" onclick="showBookingView()">
            <span style="font-size: 16px;">üìÖ</span> Book Now
          </button>
          <button class="action-button" onclick="callUs()">
            <span style="font-size: 16px;">üìû</span> Call Us
          </button>
          <button class="action-button" onclick="showMessageView()">
            <span style="font-size: 16px;">‚úâÔ∏è</span> Message
          </button>
          <button class="action-button" onclick="rewards()">
            <span style="font-size: 16px;">‚≠ê</span> Rewards
          </button>
        </div>
        
        <!-- AI Chat Section -->
        <div class="section-label">Ask Our Beauty Expert</div>
        <div class="chat-container">
          <div class="chat-box">
            <div id="chatContainer" class="chat-messages">
              <div class="chat-message bot">
                Welcome! Ask me anything about skincare, haircare, or beauty treatments.
              </div>
            </div>
            
            <div class="chat-input-container">
              <input id="chatInput" type="text" placeholder="Ask about treatments, products, or beauty advice..." 
                     class="chat-input" onkeypress="if(event.key === 'Enter') sendChat()">
              <button onclick="sendChat()" class="chat-send">Send</button>
            </div>
          </div>
        </div>
        
        <!-- Product Search Bar -->
        <div class="section-label">Search Products</div>
        <div class="search-container">
          <div class="search-box">
            <div class="search-input-container">
              <input id="productSearch" type="text" placeholder="Search for specific products..." 
                     class="search-input" onkeypress="if(event.key === 'Enter') searchProducts()">
              <button onclick="searchProducts()" class="search-button">Search</button>
            </div>
          </div>
        </div>
        
        <!-- Shop Categories -->
        <div class="section-label">Shop by Category</div>
        <div class="grid-view">
          <div class="category-card" onclick="showProducts('Anti-Aging')">
            <div class="category-image">
              <img src="/images/0013CC.jpg" alt="Anti-Aging" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Anti-Aging</div>
              <div class="category-subtitle">Retinol & peptide treatments</div>
            </div>
          </div>
          
          <div class="category-card" onclick="showProducts('Skin Care')">
            <div class="category-image">
              <img src="/images/0014CC.jpg" alt="Skin Care" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Skin Care</div>
              <div class="category-subtitle">Cleansers & toners</div>
            </div>
          </div>
          
          <div class="category-card" onclick="showProducts('Eye Care')">
            <div class="category-image">
              <img src="/images/009C.jpg" alt="Eye Care" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Eye Care</div>
              <div class="category-subtitle">Serums & treatments</div>
            </div>
          </div>
          
          <div class="category-card" onclick="showProducts('Brightening')">
            <div class="category-image">
              <img src="/images/006C.jpg" alt="Brightening" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Brightening</div>
              <div class="category-subtitle">Vitamin C & glow products</div>
            </div>
          </div>

          <div class="category-card" onclick="showProducts('Daily Protection')">
            <div class="category-image">
              <img src="/images/001C.jpg" alt="Daily Protection" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Daily Protection</div>
              <div class="category-subtitle">SPF & sun care</div>
            </div>
          </div>
          
          <div class="category-card" onclick="showProducts('Night Cream')">
            <div class="category-image">
              <img src="/images/005C.jpg" alt="Night Cream" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Night Cream</div>
              <div class="category-subtitle">Overnight repair</div>
            </div>
          </div>

          <div class="category-card" onclick="showProducts('Eye')">
            <div class="category-image">
              <img src="/images/6CC.jpg" alt="Targeted Eye" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Targeted Eye</div>
              <div class="category-subtitle">Specialized eye treatments</div>
            </div>
          </div>
          
          <div class="category-card" onclick="showProducts('all')">
            <div class="category-image">
              <img src="/images/male-american.jpg" alt="All Products" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">All Products</div>
              <div class="category-subtitle">Browse everything</div>
            </div>
          </div>
        </div>
        
        <!-- Promo -->
        <div class="promo-card">
          <div class="promo-title">New Client Special</div>
          <div class="promo-text">Get 20% off your first treatment + free consultation</div>
        </div>
        
        <!-- Featured Products -->
        <div class="section-label">Bestsellers</div>
        <div class="products-scroll" id="featuredProducts">
          <!-- Products will be loaded here -->
        </div>
        
        <!-- Services -->
        <div class="section-label">Our Services</div>
        <div class="grid-view">
          <div class="category-card" onclick="bookService('color')">
            <div class="category-image">
              <img src="/images/hispanic-american.jpg" alt="Color & Highlights" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Color & Highlights</div>
              <div class="category-subtitle">Starting at $120</div>
            </div>
          </div>
          
          <div class="category-card" onclick="bookService('styling')">
            <div class="category-image">
              <img src="/images/4CC.jpg" alt="Styling & Makeup" onerror="handleImageError(this)">
            </div>
            <div class="category-body">
              <div class="category-title">Styling & Makeup</div>
              <div class="category-subtitle">Starting at $85</div>
            </div>
          </div>
        </div>
        
        <!-- Floating Action Button -->
        <div class="fab" onclick="openAI()">üí¨</div>
        
      </div>
      
      <!-- Profile View (Hidden by default) -->
      <div class="scaffold-body profile-view" id="profileView">
        <div class="profile-header">
          <div class="profile-avatar">
            <span>üë§</span>
            <div class="profile-avatar-edit" onclick="editProfilePicture()">
              <i class="fas fa-camera" style="font-size: 14px;"></i>
            </div>
          </div>
          <div class="profile-name" id="profileName">Alex Johnson</div>
          <div class="profile-email" id="profileEmail">alex.j@example.com</div>
        </div>
        
        <div class="profile-card">
          <div class="profile-card-title">
            <span>Membership</span>
            <span style="color: #C9A961; font-weight: 600;">Gold Tier</span>
          </div>
          <div class="profile-card-content">
            <p>You've earned 345 rewards points</p>
            <p style="margin-top: 8px;">Next reward: 55 points away</p>
          </div>
        </div>
        
        <div class="profile-card">
          <div class="profile-card-title">
            <span>Personal Information</span>
            <button class="profile-edit-btn" id="profileEditBtn" onclick="toggleEditProfile()">Edit</button>
          </div>
          <div class="profile-card-content">
            <div class="profile-field">
              <label>Full Name</label>
              <input type="text" id="profileNameInput" value="Alex Johnson" disabled>
            </div>
            <div class="profile-field">
              <label>Email</label>
              <input type="email" id="profileEmailInput" value="alex.j@example.com" disabled>
            </div>
            <div class="profile-field">
              <label>Phone Number</label>
              <input type="tel" id="profilePhoneInput" value="(555) 123-4567" disabled>
            </div>
            <div class="profile-field">
              <label>Bio</label>
              <textarea id="profileBioInput" disabled>I love trying new beauty treatments and staying up to date with the latest skincare trends.</textarea>
            </div>
          </div>
        </div>
        
        <div class="profile-card">
          <div class="profile-card-title">
            <span>Upcoming Appointments</span>
          </div>
          <div class="profile-card-content">
            <div class="appointment-item">
              <div style="font-weight: 600;">Hair Color & Cut</div>
              <div>Tomorrow at 2:00 PM</div>
              <div>With Stylist: Maria</div>
            </div>
            <div class="appointment-item">
              <div style="font-weight: 600;">Facial Treatment</div>
              <div>June 15 at 10:30 AM</div>
              <div>With Esthetician: Sarah</div>
            </div>
          </div>
        </div>
        
        <div class="profile-card">
          <div class="profile-card-title">
            <span>Purchase History</span>
          </div>
          <div class="profile-card-content">
            <div class="appointment-item">
              <div style="font-weight: 600;">Retinol Renewal Serum</div>
              <div>May 28, 2023 - $39.00</div>
            </div>
            <div class="appointment-item">
              <div style="font-weight: 600;">Vitamin C Bright Serum</div>
              <div>April 15, 2023 - $32.00</div>
            </div>
            <div class="appointment-item">
              <div style="font-weight: 600;">Hair Treatment</div>
              <div>March 22, 2023 - $85.00</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Message View (Hidden by default) -->
      <div class="scaffold-body message-view" id="messageView">
        <div class="section-label">Message Your Salon Rep</div>
        
        <div class="message-contact">
          <div class="message-contact-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="message-contact-info">
            <div class="message-contact-name">Jessica Williams</div>
            <div class="message-contact-role">Senior Stylist & Salon Manager</div>
          </div>
          <div class="message-contact-action">
            <div class="message-btn" onclick="messageViaSMS()">
              <i class="fas fa-sms"></i>
            </div>
            <div class="message-btn" onclick="messageViaEmail()">
              <i class="fas fa-envelope"></i>
            </div>
          </div>
        </div>
        
        <div class="message-contact">
          <div class="message-contact-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="message-contact-info">
            <div class="message-contact-name">Michael Rodriguez</div>
            <div class="message-contact-role">Color Specialist</div>
          </div>
          <div class="message-contact-action">
            <div class="message-btn" onclick="messageViaSMS()">
              <i class="fas fa-sms"></i>
            </div>
            <div class="message-btn" onclick="messageViaEmail()">
              <i class="fas fa-envelope"></i>
            </div>
          </div>
        </div>
        
        <div class="message-contact">
          <div class="message-contact-avatar">
            <i class="fas fa-user"></i>
          </div>
          <div class="message-contact-info">
            <div class="message-contact-name">Sarah Johnson</div>
            <div class="message-contact-role">Skincare Expert</div>
          </div>
          <div class="message-contact-action">
            <div class="message-btn" onclick="messageViaSMS()">
              <i class="fas fa-sms"></i>
            </div>
            <div class="message-btn" onclick="messageViaEmail()">
              <i class="fas fa-envelope"></i>
            </div>
          </div>
        </div>
        
        <div class="promo-card">
          <div class="promo-title">Need Immediate Assistance?</div>
          <div class="promo-text">Call us directly at (555) 123-4567 during business hours: Mon-Fri 9am-7pm, Sat 10am-5pm</div>
        </div>
      </div>
      
      <!-- Booking View (Hidden by default) -->
      <div class="scaffold-body booking-view" id="bookingView">
        <div class="booking-steps">
          <div class="booking-step active" id="bookingStep1">
            <span>1</span>
            <div class="booking-step-label">Service</div>
          </div>
          <div class="booking-step" id="bookingStep2">
            <span>2</span>
            <div class="booking-step-label">Date & Time</div>
          </div>
          <div class="booking-step" id="bookingStep3">
            <span>3</span>
            <div class="booking-step-label">Details</div>
          </div>
          <div class="booking-step" id="bookingStep4">
            <span>4</span>
            <div class="booking-step-label">Confirm</div>
          </div>
        </div>
        
        <div class="booking-form">
          <!-- Service Selection -->
          <div class="booking-section active" id="bookingService">
            <div class="booking-title">Select a Service</div>
            
            <div class="booking-field">
              <label>Service Type</label>
              <select id="serviceType">
                <option value="">Select a service</option>
                <option value="haircut">Haircut & Style ($45-85)</option>
                <option value="color">Color & Highlights ($120-250)</option>
                <option value="facial">Facial Treatment ($80-150)</option>
                <option value="manicure">Manicure ($35-60)</option>
                <option value="pedicure">Pedicure ($45-75)</option>
                <option value="waxing">Waxing ($25-85)</option>
                <option value="makeup">Makeup Application ($65-120)</option>
                <option value="massage">Massage Therapy ($75-125)</option>
              </select>
            </div>
            
            <div class="booking-field">
              <label>Preferred Stylist</label>
              <select id="serviceStylist">
                <option value="">Any available stylist</option>
                <option value="jessica">Jessica Williams (Senior Stylist)</option>
                <option value="michael">Michael Rodriguez (Color Specialist)</option>
                <option value="sarah">Sarah Johnson (Skincare Expert)</option>
                <option value="david">David Chen (Hair Specialist)</option>
              </select>
            </div>
            
            <div class="booking-nav">
              <button class="booking-btn" onclick="goHome()">Cancel</button>
              <button class="booking-btn next" onclick="goToBookingStep(2)">Next</button>
            </div>
          </div>
          
          <!-- Date & Time Selection -->
          <div class="booking-section" id="bookingDateTime">
            <div class="booking-title">Select Date & Time</div>
            
            <div class="calendar-header">
              <button onclick="changeMonth(-1)">‚Üê</button>
              <span id="currentMonth">September 2025</span>
              <button onclick="changeMonth(1)">‚Üí</button>
            </div>
            
            <div class="calendar" id="calendarDays">
              <!-- Calendar days will be generated here -->
            </div>
            
            <div class="booking-field">
              <label>Available Time Slots</label>
              <div class="time-slots" id="timeSlots">
                <!-- Time slots will be generated here -->
              </div>
            </div>
            
            <div class="booking-nav">
              <button class="booking-btn" onclick="goToBookingStep(1)">Back</button>
              <button class="booking-btn next" onclick="goToBookingStep(3)">Next</button>
            </div>
          </div>
          
          <!-- Personal Details -->
          <div class="booking-section" id="bookingDetails">
            <div class="booking-title">Your Information</div>
            
            <div class="booking-field">
              <label>Full Name</label>
              <input type="text" id="bookingName" placeholder="Enter your full name">
            </div>
            
            <div class="booking-field">
              <label>Phone Number</label>
              <input type="tel" id="bookingPhone" placeholder="Enter your phone number">
            </div>
            
            <div class="booking-field">
              <label>Email Address</label>
              <input type="email" id="bookingEmail" placeholder="Enter your email address">
            </div>
            
            <div class="booking-field">
              <label>Special Requests</label>
              <textarea id="bookingRequests" placeholder="Any special requests or notes for your appointment"></textarea>
            </div>
            
            <div class="booking-nav">
              <button class="booking-btn" onclick="goToBookingStep(2)">Back</button>
              <button class="booking-btn next" onclick="goToBookingStep(4)">Next</button>
            </div>
          </div>
          
          <!-- Confirmation -->
          <div class="booking-section" id="bookingConfirm">
            <div class="booking-title">Confirm Your Appointment</div>
            
            <div class="booking-field">
              <label>Service:</label>
              <div id="confirmService">Haircut & Style ($45-85)</div>
            </div>
            
            <div class="booking-field">
              <label>Stylist:</label>
              <div id="confirmStylist">Any available stylist</div>
            </div>
            
            <div class="booking-field">
              <label>Date & Time:</label>
              <div id="confirmDateTime">September 15, 2025 at 2:00 PM</div>
            </div>
            
            <div class="booking-field">
              <label>Your Information:</label>
              <div id="confirmInfo">Alex Johnson<br>(555) 123-4567<br>alex.j@example.com</div>
            </div>
            
            <div class="booking-field">
              <label>Special Requests:</label>
              <div id="confirmRequests">None</div>
            </div>
            
            <div class="booking-nav">
              <button class="booking-btn" onclick="goToBookingStep(3)">Back</button>
              <button class="booking-btn next" onclick="confirmBooking()">Confirm Booking</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Bottom Navigation -->
      <div class="bottom-nav">
        <a class="nav-item active" onclick="goHome()">
          <span style="font-size: 20px;">üè†</span>
          <div class="nav-label">Home</div>
        </a>
        <a class="nav-item" onclick="showMessageView()">
          <span style="font-size: 20px;">‚úâÔ∏è</span>
          <div class="nav-label">Message</div>
        </a>
        <a class="nav-item" onclick="navigateTo('products')">
          <span style="font-size: 20px;">üõçÔ∏è</span>
          <div class="nav-label">Products</div>
        </a>
        <a class="nav-item" onclick="showProfile()">
          <span style="font-size: 20px;">üë§</span>
          <div class="nav-label">Profile</div>
        </a>
      </div>
    </div>
  </div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>

  <script>
    // Current cart
    let cart = {
        items: [],
        total: 0
    };

    // Profile data
    let profileData = {
        name: "Alex Johnson",
        email: "alex.j@example.com",
        phone: "(555) 123-4567",
        bio: "I love trying new beauty treatments and staying up to date with the latest skincare trends."
    };

    // Booking data
    let bookingData = {
        service: "",
        stylist: "",
        date: "",
        time: "",
        name: "",
        phone: "",
        email: "",
        requests: ""
    };

    // Current date for calendar
    let currentDate = new Date();
    let currentMonth = currentDate.getMonth();
    let currentYear = currentDate.getFullYear();

    // Handle image errors
    function handleImageError(img) {
        img.style.display = 'none';
    }

    // Typewriter effect for AI replies :cite[1]:cite[5]:cite[10]
    function typeWriter(text, element, speed = 50, index = 0) {
        if (index < text.length) {
            element.innerHTML += text.charAt(index);
            setTimeout(() => typeWriter(text, element, speed, index + 1), speed);
        }
    }

    // Load products from API
    async function loadProducts() {
        try {
            const response = await fetch('/api/products');
            const data = await response.json();
            
            // Handle different response structures
            const products = data.items || data.products || [];
            
            if (products.length > 0) {
                displayProducts(products.slice(0, 6));
            } else {
                displayProducts(getFallbackProducts().slice(0, 6));
            }
        } catch (error) {
            console.error('Error loading products:', error);
            displayProducts(getFallbackProducts().slice(0, 6));
        }
    }

    // Show products by category
    async function showProducts(category) {
        try {
            let url = '/api/products';
            if (category !== 'all') {
                url += `?category=${encodeURIComponent(category)}`;
            }
            
            const response = await fetch(url);
            const data = await response.json();
            
            // Handle different response structures
            const products = data.items || data.products || [];
            
            if (products.length > 0) {
                showProductsModal(products, category);
            } else {
                // Show modal with fallback products for that category
                showProductsModal(getProductsByCategory(category), category);
            }
        } catch (error) {
            console.error('Error loading products:', error);
            // Show fallback products
            showProductsModal(getProductsByCategory(category), category);
        }
    }

    // Get products by category from your actual data
    function getProductsByCategory(category) {
        const allProducts = getAllProducts();
        if (category === 'all') return allProducts;
        
        return allProducts.filter(product => 
            product.category && product.category.toLowerCase() === category.toLowerCase()
        );
    }

    // Get all products from your actual data
    function getAllProducts() {
        return [
            {
                id: "aa-retinol-serum-001",
                name: "Retinol Renewal Serum 0.3%",
                brand: "Luminous Lab",
                category: "Anti-Aging",
                price: 39.00,
                description: "Gentle retinol serum for first-time users. Softens fine lines and improves texture.",
                image: "/images/3CC.jpg"
            },
            {
                id: "aa-retinol-cream-002",
                name: "Pro Retinol Night Cream",
                brand: "Salon Pro",
                category: "Anti-Aging",
                price: 46.00,
                description: "Rich, cushiony night cream with encapsulated retinol and ceramides.",
                image: "/images/2CC.jpg"
            },
            {
                id: "ec-retinol-eye-001",
                name: "Retinol Eye Treatment",
                brand: "Salon Pro",
                category: "Eye Care",
                price: 34.00,
                description: "Low-irritation retinol eye cream to smooth crow's feet and brighten tone.",
                image: "/images/1CC.jpg"
            },
            {
                id: "ec-ceramide-eye-002",
                name: "Ceramide Eye Repair Gel",
                brand: "Luminous Lab", 
                category: "Eye Care",
                price: 22.00,
                description: "Cooling gel with caffeine and ceramides for morning depuff and long-lasting hydration.",
                image: "/images/black-americanfemale.jpg"
            },
            {
                id: "sc-balancing-002",
                name: "Balancing Gel Cleanser", 
                brand: "Salon Pro",
                category: "Skin Care",
                price: 14.00,
                description: "pH-balanced gel cleanser that removes makeup without stripping.",
                image: "/images/0014CC.jpg"
            },
            {
                id: "vc-serum-001",
                name: "Vitamin C 15% Bright Serum",
                brand: "Luminous Lab",
                category: "Brightening",
                price: 32.00,
                description: "Water-light L-ascorbic acid + ferulic + E to boost radiance and even tone.",
                image: "/images/0014CC.jpg"
            },
            {
                id: "spf-30-001",
                name: "Daily Mineral SPF 30",
                brand: "Luminous Lab",
                category: "Daily Protection",
                price: 21.00,
                description: "Non-nano zinc oxide with sheer finish. No white cast on most skin tones.",
                image: "/images/0010.jpg"
            },
            {
                id: "nc-ceramide-repair-001",
                name: "Ceramide Repair Night Cream",
                brand: "Luminous Lab",
                category: "Night Cream",
                price: 29.00,
                description: "Deep repair cream with ceramides + cholesterol for dry, stressed skin.",
                image: "/images/0014CC.jpg"
            },
            {
                id: "eye-targeted-001",
                name: "Peptide + C Eye Lift",
                brand: "Baine",
                category: "Eye",
                price: 31.00,
                description: "Targets puffiness and dull tone around the eyes for a rested look.",
                image: "/images/hispanic-american.jpg"
            }
        ];
    }

    // Show products in a modal
    function showProductsModal(products, category) {
        // Remove any existing modals first
        document.querySelectorAll('.modal-overlay').forEach(el => el.remove());
        
        const overlay = document.createElement('div');
        overlay.className = 'modal-overlay';
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.right = '0';
        overlay.style.bottom = '0';
        overlay.style.background = 'rgba(0,0,0,0.8)';
        overlay.style.zIndex = '1000';
        overlay.style.display = 'flex';
        overlay.style.justifyContent = 'center';
        overlay.style.alignItems = 'center';
        overlay.onclick = () => document.body.removeChild(overlay);
        
        const modal = document.createElement('div');
        modal.style.background = 'white';
        modal.style.padding = '20px';
        modal.style.borderRadius = '12px';
        modal.style.maxWidth = '90%';
        modal.style.maxHeight = '80%';
        modal.style.overflowY = 'auto';
        modal.style.position = 'relative';
        modal.onclick = (e) => e.stopPropagation();
        
        // Add close button
        const closeButton = document.createElement('span');
        closeButton.className = 'modal-close';
        closeButton.innerHTML = '&times;';
        closeButton.onclick = () => document.body.removeChild(overlay);
        modal.appendChild(closeButton);
        
        const title = document.createElement('h3');
        title.textContent = `${category} Products (${products.length})`;
        title.style.marginBottom = '15px';
        title.style.textAlign = 'center';
        modal.appendChild(title);
        
        if (products.length === 0) {
            const noProducts = document.createElement('div');
            noProducts.textContent = 'No products found in this category.';
            noProducts.style.textAlign = 'center';
            noProducts.style.color = '#666';
            modal.appendChild(noProducts);
        } else {
            // Create product grid
            const productGrid = document.createElement('div');
            productGrid.style.display = 'grid';
            productGrid.style.gridTemplateColumns = 'repeat(2, 1fr)';
            productGrid.style.gap = '10px';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.style.padding = '10px';
                productCard.style.background = '#f9f9f9';
                productCard.style.borderRadius = '8px';
                productCard.style.cursor = 'pointer';
                productCard.style.textAlign = 'center';
                productCard.onclick = (e) => {
                    e.stopPropagation();
                    showProductDetail(product);
                };
                
                const imageDiv = document.createElement('div');
                imageDiv.style.height = '60px';
                imageDiv.style.marginBottom = '8px';
                imageDiv.style.borderRadius = '6px';
                imageDiv.style.overflow = 'hidden';
                imageDiv.style.background = 'linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%)';
                
                if (product.image) {
                    const img = document.createElement('img');
                    img.src = product.image;
                    img.alt = product.name;
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.onerror = function() {
                        this.style.display = 'none';
                        imageDiv.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 20px;">üíÑ</div>';
                    };
                    imageDiv.appendChild(img);
                } else {
                    imageDiv.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 20px;">üíÑ</div>';
                }
                
                const nameDiv = document.createElement('div');
                nameDiv.textContent = product.name.length > 20 ? product.name.substring(0, 20) + '...' : product.name;
                nameDiv.style.fontSize = '12px';
                nameDiv.style.fontWeight = '600';
                nameDiv.style.marginBottom = '5px';
                
                const priceDiv = document.createElement('div');
                priceDiv.textContent = `$${product.price.toFixed(2)}`;
                priceDiv.style.fontSize = '14px';
                priceDiv.style.fontWeight = '700';
                priceDiv.style.color = '#C9A961';
                
                productCard.appendChild(imageDiv);
                productCard.appendChild(nameDiv);
                productCard.appendChild(priceDiv);
                productGrid.appendChild(productCard);
            });
            
            modal.appendChild(productGrid);
        }
        
        overlay.appendChild(modal);
        document.body.appendChild(overlay);
    }

    // Show individual product detail
    function showProductDetail(product) {
        // Remove any existing modals first
        document.querySelectorAll('.modal-overlay').forEach(el => el.remove());
        
        const overlay = document.createElement('div');
        overlay.className = 'modal-overlay';
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.right = '0';
        overlay.style.bottom = '0';
        overlay.style.background = 'rgba(0,0,0,0.8)';
        overlay.style.zIndex = '1000';
        overlay.style.display = 'flex';
        overlay.style.justifyContent = 'center';
        overlay.style.alignItems = 'center';
        overlay.onclick = () => document.body.removeChild(overlay);
        
        const modal = document.createElement('div');
        modal.style.background = 'white';
        modal.style.padding = '20px';
        modal.style.borderRadius = '12px';
        modal.style.maxWidth = '300px';
        modal.style.textAlign = 'center';
        modal.style.position = 'relative';
        modal.onclick = (e) => e.stopPropagation();
        
        // Add close button
        const closeButton = document.createElement('span');
        closeButton.className = 'modal-close';
        closeButton.innerHTML = '&times;';
        closeButton.onclick = () => document.body.removeChild(overlay);
        modal.appendChild(closeButton);
        
        const imageDiv = document.createElement('div');
        imageDiv.style.height = '120px';
        imageDiv.style.marginBottom = '15px';
        imageDiv.style.borderRadius = '8px';
        imageDiv.style.overflow = 'hidden';
        imageDiv.style.background = 'linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%)';
        
        if (product.image) {
            const img = document.createElement('img');
            img.src = product.image;
            img.alt = product.name;
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.objectFit = 'cover';
            img.onerror = function() {
                this.style.display = 'none';
                imageDiv.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 40px;">üíÑ</div>';
            };
            imageDiv.appendChild(img);
        } else {
            imageDiv.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 40px;">üíÑ</div>';
        }
        
        const nameDiv = document.createElement('h3');
        nameDiv.textContent = product.name;
        nameDiv.style.marginBottom = '10px';
        nameDiv.style.color = '#333';
        
        const priceDiv = document.createElement('div');
        priceDiv.textContent = `$${product.price.toFixed(2)}`;
        priceDiv.style.fontSize = '18px';
        priceDiv.style.fontWeight = '700';
        priceDiv.style.color = '#C9A961';
        priceDiv.style.marginBottom = '10px';
        
        const descDiv = document.createElement('div');
        descDiv.textContent = product.description || 'No description available.';
        descDiv.style.fontSize = '12px';
        descDiv.style.color = '#666';
        descDiv.style.marginBottom = '20px';
        descDiv.style.lineHeight = '1.4';
        
        const addButton = document.createElement('button');
        addButton.textContent = 'Add to Cart';
        addButton.style.background = '#C9A961';
        addButton.style.color = 'white';
        addButton.style.border = 'none';
        addButton.style.padding = '12px 20px';
        addButton.style.borderRadius = '8px';
        addButton.style.cursor = 'pointer';
        addButton.style.fontWeight = '600';
        addButton.onclick = (e) => {
            e.stopPropagation();
            addToCart(product);
            document.body.removeChild(overlay);
        };
        
        modal.appendChild(imageDiv);
        modal.appendChild(nameDiv);
        modal.appendChild(priceDiv);
        modal.appendChild(descDiv);
        modal.appendChild(addButton);
        overlay.appendChild(modal);
        document.body.appendChild(overlay);
    }

    // Add to cart function
    function addToCart(product) {
        cart.items.push(product);
        cart.total += product.price;
        // Show brief notification instead of chat message
        const notification = document.createElement('div');
        notification.textContent = `‚úì Added ${product.name} to cart`;
        notification.style.position = 'fixed';
        notification.style.bottom = '100px';
        notification.style.left = '50%';
        notification.style.transform = 'translateX(-50%)';
        notification.style.background = '#4CAF50';
        notification.style.color = 'white';
        notification.style.padding = '10px 20px';
        notification.style.borderRadius = '20px';
        notification.style.zIndex = '1001';
        document.body.appendChild(notification);
        
        setTimeout(() => {
            document.body.removeChild(notification);
        }, 2000);
    }

    // Fallback products
    function getFallbackProducts() {
        return getAllProducts().slice(0, 6);
    }

    // Display featured products
    function displayProducts(products) {
        const container = document.getElementById('featuredProducts');
        if (!container) return;
        
        container.innerHTML = '';
        
        products.forEach(product => {
            const productElement = document.createElement('div');
            productElement.className = 'mini-product';
            productElement.onclick = () => showProductDetail(product);
            
            const imageHtml = product.image ? 
                `<img src="${product.image}" alt="${product.name}" onerror="handleImageError(this)">` :
                '<div style="font-size: 24px; display: flex; align-items: center; justify-content: center; height: 100%; background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);">üíÑ</div>';
            
            productElement.innerHTML = `
                <div class="mini-product-image">
                    ${imageHtml}
                </div>
                <div class="mini-product-info">
                    <div class="mini-product-name">${product.name}</div>
                    <div class="mini-product-price">$${product.price.toFixed(2)}</div>
                </div>
            `;
            container.appendChild(productElement);
        });
    }

    // Navigation functions
    function goHome() {
        document.getElementById('mainView').style.display = 'block';
        document.getElementById('profileView').style.display = 'none';
        document.getElementById('messageView').style.display = 'none';
        document.getElementById('bookingView').style.display = 'none';
        updateNavActive(0);
    }

    function showServices() {
        showProducts('all');
    }

    function navigateTo(page) {
        if (page === 'services') {
            showServices();
        } else if (page === 'products') {
            showProducts('all');
        } else {
            alert(`${page} page would show here`);
        }
    }

    function showProfile() {
        document.getElementById('mainView').style.display = 'none';
        document.getElementById('profileView').style.display = 'block';
        document.getElementById('messageView').style.display = 'none';
        document.getElementById('bookingView').style.display = 'none';
        updateNavActive(3);
    }

    function showMessageView() {
        document.getElementById('mainView').style.display = 'none';
        document.getElementById('profileView').style.display = 'none';
        document.getElementById('messageView').style.display = 'block';
        document.getElementById('bookingView').style.display = 'none';
        updateNavActive(1);
    }

    function showBookingView() {
        document.getElementById('mainView').style.display = 'none';
        document.getElementById('profileView').style.display = 'none';
        document.getElementById('messageView').style.display = 'none';
        document.getElementById('bookingView').style.display = 'block';
        updateNavActive(0);
        
        // Initialize booking process
        goToBookingStep(1);
        generateCalendar();
    }

    function updateNavActive(index) {
        document.querySelectorAll('.nav-item').forEach((item, i) => {
            if (i === index) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
    }

    // Chat function with AI integration and typewriter effect
    async function sendChat() {
        const input = document.getElementById('chatInput');
        if (!input) return;
        
        const message = input.value.trim();
        if (!message) return;
        
        addChatMessage('user', message);
        input.value = '';
        
        try {
            const response = await fetch('/ask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ message: message })
            });
            
            if (!response.ok) throw new Error(`API error: ${response.status}`);
            
            const data = await response.json();
            const aiReply = data.reply || data.choices?.[0]?.message?.content || "I'm here to help with beauty advice and product recommendations. What would you like to know?";
            
            // Add bot message with typewriter effect
            addChatMessage('bot', '', true);
            const botMessages = document.querySelectorAll('.chat-message.bot');
            const lastBotMessage = botMessages[botMessages.length - 1];
            typeWriter(aiReply, lastBotMessage, 30);
            
        } catch (error) {
            console.error('Chat error:', error);
            // Add bot message with typewriter effect for fallback response
            setTimeout(() => {
                addChatMessage('bot', '', true);
                const botMessages = document.querySelectorAll('.chat-message.bot');
                const lastBotMessage = botMessages[botMessages.length - 1];
                typeWriter("I'm here to help with beauty advice and product recommendations. What would you like to know?", lastBotMessage, 30);
            }, 1000);
        }
    }

    function searchProducts() {
        const searchTerm = document.getElementById('productSearch').value.trim();
        if (searchTerm) {
            addChatMessage('user', `Search: ${searchTerm}`);
            document.getElementById('productSearch').value = '';
            
            setTimeout(() => {
                addChatMessage('bot', '', true);
                const botMessages = document.querySelectorAll('.chat-message.bot');
                const lastBotMessage = botMessages[botMessages.length - 1];
                typeWriter(`Searching for "${searchTerm}"... Check our categories for related products!`, lastBotMessage, 30);
            }, 1000);
        }
    }

    // Chat functions
    function addChatMessage(type, message, empty = false) {
        const chatContainer = document.getElementById('chatContainer');
        if (!chatContainer) return;
        
        const messageDiv = document.createElement('div');
        messageDiv.className = `chat-message ${type}`;
        if (!empty) {
            messageDiv.textContent = message;
        }
        chatContainer.appendChild(messageDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Profile editing functions :cite[2]:cite[6]
    function toggleEditProfile() {
        const editBtn = document.getElementById('profileEditBtn');
        const inputs = document.querySelectorAll('#profileView input, #profileView textarea');
        const isEditing = editBtn.textContent === 'Save';
        
        if (isEditing) {
            // Save changes
            profileData.name = document.getElementById('profileNameInput').value;
            profileData.email = document.getElementById('profileEmailInput').value;
            profileData.phone = document.getElementById('profilePhoneInput').value;
            profileData.bio = document.getElementById('profileBioInput').value;
            
            // Update profile display
            document.getElementById('profileName').textContent = profileData.name;
            document.getElementById('profileEmail').textContent = profileData.email;
            
            // Disable inputs
            inputs.forEach(input => input.disabled = true);
            editBtn.textContent = 'Edit';
        } else {
            // Enable inputs for editing
            inputs.forEach(input => input.disabled = false);
            editBtn.textContent = 'Save';
        }
    }

    function editProfilePicture() {
        alert("Profile picture upload would be implemented here. In a real app, this would open a file dialog.");
    }

    // Message functions :cite[3]:cite[7]
    function messageViaSMS() {
        alert("SMS messaging would be implemented here. This would open your device's SMS app with the salon's number.");
    }

    function messageViaEmail() {
        alert("Email messaging would be implemented here. This would open your device's email app with the salon's email address.");
    }

    // Booking functions :cite[8]
    function goToBookingStep(step) {
        // Validate current step before proceeding
        if (step > 1) {
            const currentStep = Array.from(document.querySelectorAll('.booking-section')).findIndex(section => 
                section.classList.contains('active')
            ) + 1;
            
            if (currentStep === 1 && !document.getElementById('serviceType').value) {
                alert("Please select a service to continue.");
                return;
            }
            
            if (currentStep === 2 && (!bookingData.date || !bookingData.time)) {
                alert("Please select a date and time to continue.");
                return;
            }
            
            if (currentStep === 3) {
                // Validate personal details
                const name = document.getElementById('bookingName').value;
                const phone = document.getElementById('bookingPhone').value;
                const email = document.getElementById('bookingEmail').value;
                
                if (!name || !phone || !email) {
                    alert("Please fill in all required fields to continue.");
                    return;
                }
                
                // Update booking data
                bookingData.name = name;
                bookingData.phone = phone;
                bookingData.email = email;
                bookingData.requests = document.getElementById('bookingRequests').value;
                
                // Update confirmation page
                document.getElementById('confirmService').textContent = 
                    document.getElementById('serviceType').selectedOptions[0].text;
                document.getElementById('confirmStylist').textContent = 
                    document.getElementById('serviceStylist').selectedOptions[0].text || "Any available stylist";
                document.getElementById('confirmDateTime').textContent = 
                    `${formatDate(bookingData.date)} at ${bookingData.time}`;
                document.getElementById('confirmInfo').innerHTML = 
                    `${bookingData.name}<br>${bookingData.phone}<br>${bookingData.email}`;
                document.getElementById('confirmRequests').textContent = 
                    bookingData.requests || "None";
            }
        }
        
        // Update steps UI
        document.querySelectorAll('.booking-step').forEach((step, index) => {
            if (index < step) {
                step.classList.add('active');
            } else {
                step.classList.remove('active');
            }
        });
        
        // Show the selected step
        document.querySelectorAll('.booking-section').forEach((section, index) => {
            if (index === step - 1) {
                section.classList.add('active');
            } else {
                section.classList.remove('active');
            }
        });
    }

    function generateCalendar() {
        const calendarDays = document.getElementById('calendarDays');
        if (!calendarDays) return;
        
        // Clear previous calendar
        calendarDays.innerHTML = '';
        
        // Add weekday headers
        const weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        weekdays.forEach(day => {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-weekday';
            dayElement.textContent = day;
            calendarDays.appendChild(dayElement);
        });
        
        // Get first day of month and number of days in month
        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        
        // Update month display
        document.getElementById('currentMonth').textContent = 
            new Date(currentYear, currentMonth).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
        
        // Add empty cells for days before the first day of the month
        for (let i = 0; i < firstDay; i++) {
            const emptyDay = document.createElement('div');
            emptyDay.className = 'calendar-day disabled';
            calendarDays.appendChild(emptyDay);
        }
        
        // Add days of the month
        const today = new Date();
        for (let day = 1; day <= daysInMonth; day++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'calendar-day';
            dayElement.textContent = day;
            
            // Disable past days
            const cellDate = new Date(currentYear, currentMonth, day);
            if (cellDate < today) {
                dayElement.classList.add('disabled');
            } else {
                dayElement.onclick = () => selectDate(day);
            }
            
            // Highlight today
            if (cellDate.toDateString() === today.toDateString()) {
                dayElement.style.fontWeight = 'bold';
                dayElement.style.border = '2px solid #C9A961';
            }
            
            calendarDays.appendChild(dayElement);
        }
        
        // Generate time slots
        generateTimeSlots();
    }

    function changeMonth(direction) {
        currentMonth += direction;
        
        // Adjust year if necessary
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
        } else if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
        }
        
        generateCalendar();
    }

    function selectDate(day) {
        bookingData.date = new Date(currentYear, currentMonth, day);
        
        // Remove previous selections
        document.querySelectorAll('.calendar-day.selected').forEach(el => {
            el.classList.remove('selected');
        });
        
        // Highlight selected date
        const days = document.querySelectorAll('.calendar-day');
        days.forEach((el, index) => {
            if (parseInt(el.textContent) === day) {
                el.classList.add('selected');
            }
        });
        
        // Generate available time slots
        generateTimeSlots();
    }

    function generateTimeSlots() {
        const timeSlotsContainer = document.getElementById('timeSlots');
        if (!timeSlotsContainer) return;
        
        timeSlotsContainer.innerHTML = '';
        
        // Only generate time slots if a date is selected
        if (!bookingData.date) return;
        
        // Generate time slots from 9am to 5pm
        for (let hour = 9; hour <= 17; hour++) {
            for (let minute = 0; minute < 60; minute += 30) {
                const timeString = `${hour % 12 === 0 ? 12 : hour % 12}:${minute === 0 ? '00' : '30'} ${hour >= 12 ? 'PM' : 'AM'}`;
                
                const timeSlot = document.createElement('div');
                timeSlot.className = 'time-slot';
                timeSlot.textContent = timeString;
                
                // Randomly disable some time slots for demonstration
                if (Math.random() > 0.7) {
                    timeSlot.classList.add('disabled');
                } else {
                    timeSlot.onclick = () => selectTime(timeString, timeSlot);
                }
                
                timeSlotsContainer.appendChild(timeSlot);
            }
        }
    }

    function selectTime(time, element) {
        bookingData.time = time;
        
        // Remove previous selections
        document.querySelectorAll('.time-slot.selected').forEach(el => {
            el.classList.remove('selected');
        });
        
        // Highlight selected time
        element.classList.add('selected');
    }

    function formatDate(date) {
        if (!date) return '';
        return date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' });
    }

    function confirmBooking() {
        alert(`Booking confirmed!\n\nService: ${bookingData.service}\nDate: ${formatDate(bookingData.date)}\nTime: ${bookingData.time}\n\nWe'll see you soon!`);
        goHome();
    }

    // Service functions
    function bookService(service) {
        alert(`Booking ${service} service...`);
    }

    function bookNow() { showBookingView(); }
    function callUs() { alert('Calling (555) 123-4567...'); }
    function rewards() { alert('Viewing rewards program...'); }
    function openAI() { 
        const input = document.getElementById('chatInput');
        if (input) input.focus();
    }

    function closeModal() {
        document.querySelectorAll('.modal-overlay').forEach(el => el.remove());
    }

    // Splash screen functions :cite[4]:cite[9]
    function showSplashScreen() {
        const splashScreen = document.getElementById('splashScreen');
        const progressBar = document.getElementById('splashProgress');
        
        let progress = 0;
        const interval = setInterval(() => {
            progress += 5;
            progressBar.style.width = `${progress}%`;
            
            if (progress >= 100) {
                clearInterval(interval);
                setTimeout(() => {
                    splashScreen.style.opacity = '0';
                    setTimeout(() => {
                        splashScreen.style.display = 'none';
                    }, 600);
                }, 500);
            }
        }, 100);
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        loadProducts();
        showSplashScreen();
        
        // Initialize chat with typewriter effect
        setTimeout(() => {
            addChatMessage('bot', '', true);
            const botMessages = document.querySelectorAll('.chat-message.bot');
            const lastBotMessage = botMessages[botMessages.length - 1];
            typeWriter('Hello! I\'m your beauty assistant. Ask me about skincare, products, or salon services!', lastBotMessage, 30);
        }, 1000);
        
        // Fix navigation click handlers
        document.querySelectorAll('.nav-item')[0].onclick = goHome;
        document.querySelectorAll('.nav-item')[1].onclick = showMessageView;
        document.querySelectorAll('.nav-item')[2].onclick = () => navigateTo('products');
        document.querySelectorAll('.nav-item')[3].onclick = showProfile;
        
        // Initialize profile data
        document.getElementById('profileNameInput').value = profileData.name;
        document.getElementById('profileEmailInput').value = profileData.email;
        document.getElementById('profilePhoneInput').value = profileData.phone;
        document.getElementById('profileBioInput').value = profileData.bio;
    });
  </script>
</body>
</html>
